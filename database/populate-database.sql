CREATE TABLE "subject"."space" (
	spaceid INT NOT NULL GENERATED ALWAYS AS IDENTITY (START WITH 1, INCREMENT BY 1),
	NAME VARCHAR(1024) NOT NULL,
	CREATED TIMESTAMP DEFAULT current_timestamp NOT NULL,
	UPDATED TIMESTAMP DEFAULT current_timestamp,
	DESCRIPTION VARCHAR(1024),
	CONSTRAINT SPACE_PK PRIMARY KEY (SPACEID)
);
CREATE UNIQUE INDEX "SQL0000000033-0efbcf46-0172-8a13-0a8a-0000667e4990" ON "subject"."space" (SPACEID);

CREATE TABLE "subject"."user" (
	userid INT NOT NULL GENERATED ALWAYS AS IDENTITY (START WITH 1, INCREMENT BY 1),
	NAME VARCHAR(1024) NOT NULL,
	EMAIL VARCHAR(1024) NOT NULL,
	SALT VARCHAR(1024) NOT NULL,
	HASH VARCHAR(1024) NOT NULL,
	CREATED TIMESTAMP DEFAULT current_timestamp NOT NULL,
	UPDATED TIMESTAMP DEFAULT current_timestamp,
	CONSTRAINT USER_PK PRIMARY KEY (USERID)
);
CREATE UNIQUE INDEX "SQL0000000031-a9a10f38-0172-8a13-0a8a-0000667e4990" ON "subject"."user" (EMAIL);
CREATE UNIQUE INDEX "SQL0000000032-c13d4f3a-0172-8a13-0a8a-0000667e4990" ON "subject"."user" (USERID);

CREATE TABLE "subject"."page" (
	pageid INT NOT NULL GENERATED ALWAYS AS IDENTITY (START WITH 1, INCREMENT BY 1),
	USERID int NOT NULL,
	SPACEID int NOT NULL,
	PARENTID int,
	NAME VARCHAR(1024) NOT NULL,
	CONTENT CLOB,
	CREATED TIMESTAMP DEFAULT current_timestamp NOT NULL,
	UPDATED TIMESTAMP DEFAULT current_timestamp,
	CONSTRAINT PAGE_PK PRIMARY KEY (PAGEID),
	CONSTRAINT PAGE_SPACE_FK FOREIGN KEY (SPACEID) REFERENCES "subject"."space"(SPACEID),
	CONSTRAINT PAGE_USER_FK FOREIGN KEY (USERID) REFERENCES "subject"."user"(USERID)
);
CREATE UNIQUE INDEX "SQL0000000038-0e6c0f61-0172-8a13-0a8a-0000667e4990" ON "subject"."page" (PAGEID);
CREATE INDEX "SQL0000000039-361ccf63-0172-8a13-0a8a-0000667e4990" ON "subject"."page" (USERID);
CREATE INDEX "SQL0000000040-ddce8f65-0172-8a13-0a8a-0000667e4990" ON "subject"."page" (SPACEID);

CREATE TABLE "subject"."spaceuser" (
	spaceuserid INT NOT NULL GENERATED ALWAYS AS IDENTITY (START WITH 1, INCREMENT BY 1),
	SPACEID int NOT NULL,
	USERID int NOT NULL,
	CONSTRAINT SPACEUSER_PK PRIMARY KEY (SPACEUSERID),
	CONSTRAINT SPACEUSER_SPACE_FK FOREIGN KEY (SPACEID) REFERENCES "subject"."space"(SPACEID),
	CONSTRAINT SPACEUSER_USER_FK FOREIGN KEY (USERID) REFERENCES "subject"."user"(USERID)
);
CREATE UNIQUE INDEX "SQL0000000035-f8b2cf53-0172-8a13-0a8a-0000667e4990" ON "subject"."spaceuser" (SPACEUSERID);
CREATE INDEX "SQL0000000036-a05c8f55-0172-8a13-0a8a-0000667e4990" ON "subject"."spaceuser" (SPACEID);
CREATE INDEX "SQL0000000037-48074f57-0172-8a13-0a8a-0000667e4990" ON "subject"."spaceuser" (USERID);

CREATE TABLE "subject"."attachment" (
	attachmentid INT NOT NULL GENERATED ALWAYS AS IDENTITY (START WITH 1, INCREMENT BY 1),
	USERID int NOT NULL,
	PAGEID int NOT NULL,
	NAME VARCHAR(1024) NOT NULL,
	CONTENT CLOB,
	CREATED TIMESTAMP DEFAULT current_timestamp NOT NULL,
	UPDATED TIMESTAMP DEFAULT current_timestamp,
	CONSTRAINT ATTACHMENT_PK PRIMARY KEY (ATTACHMENTID),
	CONSTRAINT ATTACHMENT_PAGE_FK FOREIGN KEY (PAGEID) REFERENCES "subject"."page"(PAGEID),
	CONSTRAINT ATTACHMENT_USER_FK FOREIGN KEY (USERID) REFERENCES "subject"."user"(USERID)
);
CREATE UNIQUE INDEX "SQL0000000041-d7ea4f72-0172-8a13-0a8a-0000667e4990" ON "subject"."attachment" (ATTACHMENTID);
CREATE INDEX "SQL0000000042-2fa38f74-0172-8a13-0a8a-0000667e4990" ON "subject"."attachment" (USERID);
CREATE INDEX "SQL0000000043-475dcf76-0172-8a13-0a8a-0000667e4990" ON "subject"."attachment" (PAGEID);

CREATE TABLE "subject"."comment" (
	commentid INT NOT NULL GENERATED ALWAYS AS IDENTITY (START WITH 1, INCREMENT BY 1),
	USERID int NOT NULL,
	PAGEID int NOT NULL,
	PARENTID int,
	CONTENT CLOB,
	CREATED TIMESTAMP DEFAULT current_timestamp NOT NULL,
	UPDATED TIMESTAMP DEFAULT current_timestamp,
	CONSTRAINT COMMENT_PK PRIMARY KEY (COMMENTID),
	CONSTRAINT COMMENT_PAGE_FK FOREIGN KEY (PAGEID) REFERENCES "subject"."page"(PAGEID),
	CONSTRAINT COMMENT_USER_FK FOREIGN KEY (USERID) REFERENCES "subject"."user"(USERID)
);
CREATE UNIQUE INDEX "SQL0000000044-b1b0cf83-0172-8a13-0a8a-0000667e4990" ON "subject"."comment" (COMMENTID);
CREATE INDEX "SQL0000000045-59728f85-0172-8a13-0a8a-0000667e4990" ON "subject"."comment" (USERID);
CREATE INDEX "SQL0000000046-01354f87-0172-8a13-0a8a-0000667e4990" ON "subject"."comment" (PAGEID);