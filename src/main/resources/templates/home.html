<div th:replace="header"></div>

<th:block th:if="${spaces} and ${spaces.size()} gt 0">
	<h1 class="pb-3">New and recently updated Spaces</h1>
	<div th:each="space : ${spaces}" class="card mb-3">
		<div class="h2 card-header"><a th:text="${space.getName()}" th:href="@{'/space/' + ${space.getSpaceid()}}"></a></div>
		<div class="card-body">
			<th:block th:if="${space.getDescription()}">
				<p class="card-title h3" th:text="${space.getDescription()}"></p>
			</th:block>
			<p class="small card-subtitle text-muted" th:text="${'Updated ' + space.getUpdated()}"></p>
			<div class="card-text">
				<p class="small">Operator: <a th:href="@{'/user/' + ${space.getUserid()}}" th:text="${userRepository.findById(space.getUserid()).get().getName()}"></a></p>
				<ul class="list-unstyled">
					<li th:each="spacePages : ${pageRepository.findTop5ByActiveTrueAndSpaceOrderByUpdatedDesc(space)}"> <a th:text="${spacePages.getName()}" th:href="${'/space/' + spacePages.getSpace().getSpaceid() + '/page/' + spacePages.getPageid()}"></a> <small class="text-muted" th:text="${userRepository.findById(space.getUserid()).get().getName() + ', ' + spacePages.getUpdated()}"></small></li>
				</nav>
			</div>
		</div>
	</div>
</th:block>

<div th:replace="footer"></div>